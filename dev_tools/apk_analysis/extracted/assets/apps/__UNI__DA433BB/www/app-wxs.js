var __wxsModules={};
__wxsModules["92f5c304"]=(()=>{var H=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var W=H((j,X)=>{var u={};function c(){if(typeof navigator!="object")return!1;for(var r=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!0,i=0;i<e.length-1;i++)if(r.indexOf(e[i])>0){n=!1;break}return n}var f=!1;typeof window=="object"&&(f=!0);var D=function(r,e,n,i,t,s){return r<0||r>=e||n<0||n>=i||t<0||t>=s},g=!1;function w(r){return r==="true"||r==!0}var I=function(r,e,n){var i=n.basedata,t=function(a,o){if(n.list[a].fixed){var l=o?--a:++a;return t(a,o)}return a},s=-1;return n.list.forEach(function(a){a.sortKey===e&&(s=a.realKey)}),n.list.map(function(a){if(a.fixed)return a;var o=a.sortKey,l=a.realKey;return r<e?o>r&&o<=e?(--l,o=t(--o,!0)):o===r&&(l=s,o=e):r>e&&(o>=e&&o<r?(++l,o=t(++o,!1)):o===r&&(l=s,o=e)),a.sortKey!==o&&(a.tranX=o%i.columns*100+"%",a.tranY=Math.floor(o/i.columns)*100+"%",a.sortKey=o,a.realKey=l),a})},x=function(r,e,n){if(n){var i=[],t=[];r.forEach(function(s){i[s.sortKey]=s}),i.forEach(function(s){t.push(s.data)}),e=="change"?n.callMethod("change",{listData:t}):n.callMethod("sort_end",{listData:t})}},T=function(r,e){var n=r.instance,i=n.getDataset();if(g=w(i.edit),!!g){var t=n.getState();(!t.basedata||t.basedata=="undefined")&&(t.basedata=JSON.parse(i.basedata));var s=t.basedata,a=null;if(f&&c()?a=r:a=r.changedTouches?r.changedTouches[0]:t.sTouch,!!a){t.cur=+i.index;var o=t.list[t.cur];o&&o.fixed||t.dragging||(e.callMethod("drag",{wxdrag:!0}),t.tranX=s.columns===1?0:a.pageX-(s.itemWidth/2+s.wrapLeft),t.tranY=a.pageY-(s.itemHeight/2+s.wrapTop),t.sId=a.identifier,n.setStyle({transform:"translate3d("+t.tranX+"px, "+t.tranY+"px, 0)"}),t.itemsInstance.forEach(function(l,d){l.removeClass("tui-drag__transition").removeClass("tui-drag__current"),l.addClass(d==t.cur?"tui-drag__current":"tui-drag__transition")}),e.callMethod("vibrate"),t.dragging=!0)}}},Y=function(r,e){var n=r.instance,i=n.getState();i.list=u.list,i.itemsInstance=u.itemsInstance,i.basedata=u.basedata,f&&c()?i.sTouch=r:i.sTouch=r.changedTouches[0]||r.touches[0];var t=n.getDataset();g=w(t.edit),e.callMethod("drag",{wxdrag:!1})},C=function(r,e,n){var i=null,t={},s=null;f&&c()?(s=r,t=n.instance.getState(),i=n.instance):(s=r.changedTouches[0]||r.touches[0],i=r.instance,t=i.getState()),r.preventDefault&&t.dragging&&r.preventDefault();var a=t.basedata;if(!(!t.dragging||!g||!s)&&t.sId===s.identifier){var o=a.columns===1?0:s.pageX-(a.itemWidth/2+a.wrapLeft),l=s.pageY-(a.itemHeight/2+a.wrapTop);s.clientY>a.windowHeight-a.itemHeight-a.realBottomSize?e.callMethod("pageScroll",{scrollTop:s.pageY+a.itemHeight-(a.windowHeight-a.realBottomSize)}):s.clientY<a.itemHeight+a.realTopSize&&e.callMethod("pageScroll",{scrollTop:s.pageY-a.itemHeight-a.realTopSize}),i.setStyle({transform:"translate3d("+o+"px, "+l+"px, 0)"});var d=t.list[t.cur].sortKey,p=Math.round(o/a.itemWidth),S=Math.round(l/a.itemHeight),h=p+a.columns*S,b=t.list[h];if(!(b&&b.fixed)&&!D(p,a.columns,S,a.rows,h,t.list.length)&&!(d===h||d===t.preStartKey)){t.preStartKey=d;var m=I(d,h,t);t.itemsInstance.forEach(function(y,_){var M=m[_];_!==t.cur&&y.setStyle({transform:"translate3d("+M.tranX+","+M.tranY+", 0)"})}),e.callMethod("vibrate"),e.callMethod("listChange",{list:m}),x(m,"change",e)}}},E=function(r,e,n){var i=null,t={};f&&c()?(i=n.instance,t=n.instance.getState()):(t=r.instance.getState(),i=r.instance),!(!t.dragging||!g)&&(x(t.list,"sort_end",e),i.addClass("tui-drag__transition"),i.setStyle({transform:"translate3d("+t.list[t.cur].tranX+","+t.list[t.cur].tranY+", 0)"}),t.itemsInstance.forEach(function(s,a){s.removeClass("tui-drag__transition")}),t.preStartKey=-1,t.dragging=!1,e.callMethod("drag",{wxdrag:!1}),t.cur=-1,t.tranX=0,t.tranY=0)},O=function(r,e,n,i){u.basedata=r},P=function(r,e,n,i){u.itemsInstance=n.selectAllComponents(".tui-drag__item"),u.list=r||[],!(!u.itemsInstance||u.itemsInstance.length===0)&&u.list.forEach(function(t,s){var a=u.itemsInstance[s];t&&a&&(a.setStyle({transform:"translate3d("+t.tranX+","+t.tranY+", 0)"}),t.fixed&&a.addClass("tui-drag__fixed"))})},v=!1;function A(r,e){!f||!c()||(Y(r,e),T(r,e),v=!0,window.onmousemove=function(n){!f||!c()||!v||C(n,e,r)},window.onmouseup=function(n){!f||!c()||!v||(E(n,e,r),v=!1)})}function z(){return!0}X.exports={longPress:T,touchStart:Y,touchMove:C,touchEnd:E,mousedown:A,baseDataObserver:O,listObserver:P,stopMove:z}});return W();})();
