"""
模板优先级配置模块
Template Priority Configuration Module

为不同的检测场景定义优先级模板列表，大幅提升检测速度
"""

# 场景到模板的映射（按优先级排序）
TEMPLATE_PRIORITY_MAP = {
    # 启动流程相关（6个模板）
    'startup': [
        '加载卡死白屏.png',      # 最可能：白屏卡死
        '启动页服务弹窗.png',    # 可能：用户协议弹窗
        '广告.png',              # 可能：广告页
        '首页公告.png',          # 可能：首页公告弹窗
        '首页.png',              # 可能：首页
        '登陆.png',              # 可能：登录页
    ],
    
    # 广告检查（3个模板）
    'ad_check': [
        '广告.png',              # 最可能：广告页
        '首页.png',              # 可能：已跳过到首页
        '启动页服务弹窗.png',    # 可能：弹窗
    ],
    
    # 个人页面相关（3个模板）
    'profile': [
        '已登陆个人页.png',      # 最可能：已登录个人页
        '未登陆个人页.png',      # 可能：未登录个人页
        '首页.png',              # 可能：在首页
    ],
    
    # 余额读取（3个模板）
    'balance': [
        '已登陆个人页.png',      # 最可能：已登录个人页
        '未登陆个人页.png',      # 可能：未登录个人页
        '首页.png',              # 可能：在首页
    ],
    
    # 首页相关（2个模板）
    'home': [
        '首页.png',              # 最可能：首页
        '首页公告.png',          # 可能：首页弹窗
    ],
    
    # 登录相关（5个模板）
    'login': [
        '登陆.png',              # 最可能：登录页
        '积分页.png',            # 可能：登录成功跳转到积分页（手动登录必现）
        '首页.png',              # 可能：已登录到首页
        '已登陆个人页.png',      # 可能：已登录到个人页
        '启动页服务弹窗.png',    # 可能：用户协议弹窗
    ],
    
    # 签到相关（4个模板）
    'checkin': [
        '签到.png',              # 最可能：签到页
        '签到弹窗.png',          # 可能：签到弹窗
        '首页.png',              # 可能：在首页
        '温馨提示.png',          # 可能：次数用完弹窗
    ],
    
    # 签到循环检测（3个模板）
    'checkin_loop': [
        '签到.png',              # 最可能：签到页
        '签到弹窗.png',          # 可能：签到弹窗
        '首页.png',              # 可能：返回首页
    ],
    
    # 弹窗检测（5个模板）
    'popup': [
        '首页公告.png',          # 最可能：首页公告
        '签到弹窗.png',          # 可能：签到弹窗
        '启动页服务弹窗.png',    # 可能：用户协议
        '温馨提示.png',          # 可能：温馨提示
        '用户名或密码错误.png',  # 可能：错误提示
    ],
    
    # 页面状态守卫 - 通用检测（8个模板）
    'guard_general': [
        '首页.png',              # 最可能：首页
        '已登陆个人页.png',      # 可能：个人页
        '签到.png',              # 可能：签到页
        '积分页.png',            # 可能：积分页（登录后跳转）
        '首页公告.png',          # 可能：弹窗
        '模拟器桌面.png',        # 可能：桌面
        '登陆.png',              # 可能：登录页
        '商品列表.png',          # 可能：异常页面
    ],
    
    # 页面状态守卫 - 异常处理（6个模板）
    'guard_exception': [
        '首页公告.png',          # 最可能：弹窗
        '模拟器桌面.png',        # 可能：桌面
        '积分页.png',            # 可能：积分页（需要返回）
        '商品列表.png',          # 可能：商品列表（需要返回）
        '首页.png',              # 可能：首页
        '登陆.png',              # 可能：登录页
    ],
    
    # 导航验证（3个模板）
    'navigation': [
        '首页.png',              # 最可能：首页
        '已登陆个人页.png',      # 可能：个人页
        '签到.png',              # 可能：签到页
    ],
    
    # 最终状态检查（4个模板）
    'final_check': [
        '首页.png',              # 最可能：首页
        '登陆.png',              # 可能：登录页
        '已登陆个人页.png',      # 可能：个人页
        '积分页.png',            # 可能：积分页
    ],
    
    # 转账流程相关（5个模板）
    'transfer': [
        '我的钱包.png',          # 最可能：钱包页面
        '余额互转.png',          # 最可能：转账页面
        '交易流水.png',          # 可能：交易流水页面
        '已登陆个人页.png',      # 可能：个人页
        '首页.png',              # 可能：首页
    ],
    
    # 钱包相关（4个模板）
    'wallet': [
        '我的钱包.png',          # 最可能：钱包页面
        '余额互转.png',          # 可能：转账页面
        '交易流水.png',          # 可能：交易流水
        '已登陆个人页.png',      # 可能：个人页
    ],
}


def get_priority_templates(scenario: str) -> list:
    """获取指定场景的优先级模板列表
    
    Args:
        scenario: 场景名称（如 'startup', 'profile', 'home' 等）
        
    Returns:
        list: 优先级模板列表，如果场景不存在则返回空列表
    """
    return TEMPLATE_PRIORITY_MAP.get(scenario, [])


def get_all_scenarios() -> list:
    """获取所有可用的场景名称
    
    Returns:
        list: 场景名称列表
    """
    return list(TEMPLATE_PRIORITY_MAP.keys())
