"""
页面-元素映射配置
定义每个页面应该检测哪些元素
"""

# 元素类别ID映射
ELEMENT_CLASS_IDS = {
    "同意按钮": 0,
    "拒绝按钮": 1,
    "确认按钮": 2,
    "关闭按钮": 3,
    "跳过按钮": 4,
    "返回按钮": 5,
    "登陆按钮": 6,  # 登录页的登陆按钮
    "签到按钮": 7,
    "每日签到按钮": 8,  # 首页的每日签到入口按钮
    "转账按钮": 9,
    "转增按钮": 10,  # 钱包页的转增按钮
    "提交按钮": 11,  # 转账页的提交按钮
    "首页按钮": 12,  # 分类页到首页
    "我的按钮": 13,  # 首页到个人页
    "请登陆按钮": 14,  # 未登陆页面的登录按钮
    "抵扣劵数字": 15,  # 个人页的抵扣劵数字
    "优惠劵数字": 16,  # 个人页的优惠劵数字
    "协议勾选框": 17,  # 登录页的协议勾选框
    "签到成功文本": 18,  # 签到弹窗的"签到成功"文字
    "签到金额": 19,  # 签到弹窗的金额数字
    "余额数字": 20,
    "积分数字": 21,
    "昵称文本": 22,
    "用户ID": 23,
    "账号输入框": 24,  # 登录页的账号输入框
    "密码输入框": 25,  # 登录页的密码输入框
    "转账金额输入框": 26,  # 转账页的金额输入框
    "ID输入框": 27,  # 转账页的ID输入框
    "全部转账按钮": 28,  # 转账页的全部转账按钮
    "转账确认ID": 29,  # 转账确认弹窗的ID
    "转账确认昵称": 30,  # 转账确认弹窗的昵称
    "转账确认金额": 31,  # 转账确认弹窗的金额
    "其他": 32,
}

# 页面-元素映射
# 定义每个页面应该检测哪些元素
PAGE_ELEMENT_MAPPING = {
    # 弹窗类
    "启动页服务弹窗": ["同意按钮", "拒绝按钮"],
    "温馨提示": ["确认按钮", "关闭按钮"],
    "签到弹窗": ["确认按钮", "签到成功文本", "签到金额"],  # 签到金额
    "转账确认弹窗": ["确认按钮", "转账确认ID", "转账确认昵称", "转账确认金额"],  # 转账确认信息
    "首页公告": ["关闭按钮"],
    "手机号码不存在": ["确认按钮"],
    "用户名或密码错误弹窗": ["确认按钮"],
    
    # 主要页面
    "首页": ["我的按钮", "每日签到按钮"],  # 到个人页，到签到页
    "个人页_已登录": ["昵称文本", "用户ID", "首页按钮", "抵扣劵数字", "优惠劵数字"],  # 首页按钮返回首页，抵扣劵和优惠劵数字
    "个人页_未登录": ["请登陆按钮"],  # 到登录页
    "签到页": ["签到按钮"],
    "钱包页": ["余额数字", "转增按钮"],  # 转增按钮到转账页
    "转账页": ["提交按钮", "返回按钮", "转账金额输入框", "ID输入框", "全部转账按钮"],  # 提交按钮、返回按钮、输入框、全部转账按钮
    "积分页": ["积分数字", "返回按钮"],
    "设置": ["返回按钮"],
    
    # 其他页面
    "交易流水": ["返回按钮"],
    "我的优惠劵": ["返回按钮"],
    "商品列表": ["返回按钮"],
    "分类页": ["首页按钮"],  # 到首页
    "搜索页": ["返回按钮"],
    "文章页": ["返回按钮"],
    
    # 特殊页面
    "登录页": ["登陆按钮", "协议勾选框", "账号输入框", "密码输入框"],  # 登陆按钮、协议勾选框、输入框
    "广告页": ["跳过按钮"],
    "加载页": [],
    "模拟器桌面": [],
}


def get_element_classes_for_page(page_type: str) -> list:
    """
    获取指定页面应该检测的元素类别ID列表
    
    Args:
        page_type: 页面类型（如"个人页_已登录"）
        
    Returns:
        list: 元素类别ID列表（如 [10, 11] 表示昵称文本和用户ID）
    """
    if page_type not in PAGE_ELEMENT_MAPPING:
        # 未知页面，返回所有类别
        return list(range(len(ELEMENT_CLASS_IDS)))
    
    element_names = PAGE_ELEMENT_MAPPING[page_type]
    element_ids = [ELEMENT_CLASS_IDS[name] for name in element_names if name in ELEMENT_CLASS_IDS]
    
    return element_ids


def get_element_names_for_page(page_type: str) -> list:
    """
    获取指定页面应该检测的元素名称列表
    
    Args:
        page_type: 页面类型（如"个人页_已登录"）
        
    Returns:
        list: 元素名称列表（如 ["昵称文本", "用户ID"]）
    """
    return PAGE_ELEMENT_MAPPING.get(page_type, [])


# 使用示例
if __name__ == "__main__":
    # 示例1：获取个人页应该检测的元素
    page = "个人页_已登录"
    element_ids = get_element_classes_for_page(page)
    element_names = get_element_names_for_page(page)
    
    print(f"页面: {page}")
    print(f"应检测元素: {element_names}")
    print(f"元素ID: {element_ids}")
    
    # 示例2：在YOLO检测中使用
    print("\n使用示例:")
    print(f"results = yolo_model.predict(screenshot, classes={element_ids})")
